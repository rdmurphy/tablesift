/* tablesift - 0.0.3 2013-09-05 */
!function(){var a={};window.TableSift=a;var b=Array.prototype,c=b.forEach,d=b.map,e=Object.prototype,f=e.toString,g=function(a,b,d){if(null!=a){c&&a.forEach===c&&a.forEach(b,d);var e,f;for(e=0,f=a.length;f>e;++e)e in a&&b.call(d,a[e],e,a)}},h=function(a,b,c){var e=[];return null==a?e:d&&a.map===d?a.map(b,c):(g(a,function(a,d,f){e.push(b.call(c,a,d,f))}),e)},i=function(a,b,c){return h(h(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),function(a){return a.value})},j=function(a){return"[object String]"===f.call(a)},k=function(a){return j(a)?document.getElementById(a):a},l=function(a,b){var c=[];return console.log(b),g(a.rows,function(a){var d=[];g(a.children,function(a){var c=a.cellIndex,e=a.textContent;b[c]?d.push(b[c](e,a)):(-1!==e.indexOf(",")&&(e=e.replace(/,/g,"")),-1!==e.indexOf("$")&&(e=e.replace(/\$/g,"")),d.push(isNaN(+e)?e:+e))}),c.push([d,a])}),c},m=function(a,b,c){var d;if(d=a.className?a.className.split(" "):[],"add"===c&&d.push(b),"remove"===c){var e=d.indexOf(b);e>-1&&d.splice(e,1)}a.className=d.join(" ")};a.init=function(a,b){b||(b={});var c=k(a),d=c.tHead.rows[0].cells,e=c.tBodies[0],f=l(e,b.customSort);g(d,function(a){m(a,"siftable","add"),a.addEventListener("click",function(){var b=a.cellIndex,h=a.getAttribute("data-sort"),j=i(f,function(a){return a[0][b]});g(d,function(b){a!==b&&(b.setAttribute("data-sort",""),m(b,"siftable-asc","remove"),m(b,"siftable-des","remove"))}),"asc"===h?(j.reverse(),a.setAttribute("data-sort","des"),m(a,"siftable-des","add"),m(a,"siftable-asc","remove")):(a.setAttribute("data-sort","asc"),m(a,"siftable-asc","add"),m(a,"siftable-des","remove"));var k=document.createDocumentFragment();g(j,function(a){k.appendChild(a[1])}),e=c.removeChild(e).cloneNode(),c.appendChild(e).appendChild(k)})})}}.call(this);